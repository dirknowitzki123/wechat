<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="telephone=no" name="format-detection"/>
    <title>信息提交确认书</title>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <link rel="stylesheet" href="css/common.css" />
    <link rel="stylesheet" href="css/agremtStyle.css" />
    
</head>
<body>
	<div class="register" style="background: #F3F4F5;">
	    <header class="header blue-bg">
	        <h3 class="title">用户协议</h3>
	    </header>
	    <div class="agree-text">
	        <h4>信息提交确认书</h4>
	        <p style="text-indent:2em;">用户、您好，您在此不可撤销地同意本次注册后的所有操作流程（包括但不限于注册，登录等）均通过本公司指定的第三方提供的手机应用、微信服务号、网站服务平台等完成。通过您本人手机号注册后的账号内所有进行的信息提交均视为由您本人操作。</p>
			<table border="1"  cellspacing="0">
				<tr><th>基本信息</th></tr>
				<tr><td>甲方（本公司）：四川满得利科技有限公司</td></tr>
				<tr><td>乙方（用户/您）手机号：<input style="width:100px;" type="text" id="phoneNo" readonly="readonly"/></td></tr>
			</table>
	        <p style="text-indent:2em;font-weight: bold;">您点击同意/确认/进入或扫描指定二维码，即视为您同意并确认以下条款，并自愿承担条款内容可能引发的一切责任：</p>
	        <p>一、您确认，您是具备独立民事权利及民事行为能力，能独立承担民事责任的自然人；您知悉并确认<span>四川满得利科技有限公司</span>（下简称本公司）是依法成立，且合法存续，具备独立的民事权利及民事行为能力，能独立承担相应的民事责任的民事主体。</p>
	        <p style="font-weight: bold">二、您确认，您自愿将您的或有借款需求的企业或个人（下简称“客户”）的姓名、联系电话、借款需求等信息提交给本公司。提交客户信息的，提交前已经获得该客户的合法授权，即该客户同意您将信息提交至本公司以获得借款。</p>
	        <p style="font-weight: bold">三、您确认，您提交至本公司的信息，本公司可因借款事宜，将您或客户的信息提供给与本公司有合作关系的第三方公司，并可用于向您或客户推介相关借款产品，但本公司应要求第三方公司妥善保管，且仅限于借款事宜使用。</p>
	        <p style="font-weight: bold">四、您确认，您提交的信息，经本公司确认，您或客户确实具有借款需求，且您或客户成功办理本公司推介的借款产品后，本公司按照以下方式支付您的报酬：</p>
	        <p style="text-indent:2em">依据您提供的有效客户信息，即经本公司确认，您或客户确实具有借款需求，且您或客户成功办理本公司推介的借款产品后，本公司按您或客户借款金额的 3% ，并在该金额基础上扣除15%的手续费之后支付您相应的报酬。</p>
	        <p style="font-weight: bold">五、您确认，您向本公司提交的信息均合法、真实、有效。提供客户信息的，您提供的信息的取得、使用等均经过客户的合法授权，授权或信息的取得、使用未采用骚扰、辱骂、购买、交换等不当或违法手段。</p>
	        <p>六、您确认，未擅自或以本公司名义对客户做出必定能获得借款或其他有关借款的一切承诺。</p>
	        <p style="font-weight: bold">七、您确认，本确认书，并不表示您与本公司之间建立了劳动关系，本公司不承担用人单位的任何义务，您亦不享有劳动者的任何权利。双方的关系接受《中华人民共和国合同法》的调整，双方均应按照约定履行各自的权利义务。</p>
	        <p style="font-weight: bold">八、您确认，您若违反本确认书的相关约定，您自愿承担因此引发的一切责任，本公司有权拒绝支付您的报酬，若给本公司造成损失的，您还应赔偿本公司的损失。</p>
	        <p style="font-weight: bold">九、您确认，您将严格按照本公司产品要求和工作流程开展工作，不以任何方式收取客户任何形式的费用，不实施任何形式的欺诈行为，不给客户承诺产品要求以外的内容。</p>
	        <p style="font-weight: bold">十、您确认，您将严格按照《个人信息保护法》等相关法律法规和公司规定开展工作。</p>
	        <p style="font-weight: bold">您确认，您已阅读本确认书的所有内容，并充分理解，您点击同意/确认/进入或扫描指定二维码，即视为您同意并确认以上条款，并自愿承担条款内容可能引发的一切责任。</p>
	    	<div class="confirm_agree">
		    	<p style="text-indent:2em;font-weight: bold;">本人已经认真阅读并理解《信息提交确认书》的所有条款和涵义，自愿签署并接受《信息提交确认书》的所有内容。本人认同《信息提交确认书》的签署方式为远程签署。本人知悉并理解远程签署是指本人身处异地，
		    	通过远程拍摄或录音设备等提供本人手机号等必要资料，并在相关文件上签字，经相关主体确认无误后成立并生效,或者本人通过网络平台(平台展现形式包括不限于微信、APP、网页等）以线上点击确认的方式签署合同，签署后成立并生效
		    	(本人知悉应妥善保管本人在网络平台的注册用户名和密码，自行承担因注册用户名和密码丢失、泄露或允许他人使用所产生的一切后果。同时，只要是通过本人用户名和密码登陆的任何操作均视为本人的真实意思表示，本人愿意承担因此产生的一切责任)。</p>
				<p style="text-indent:2em;font-weight: bold;">本人再次确认，远程签署的确认书效力与当面签署的确认书效力一致，对本人均具有约束力。</p>
	    	</div>
	    	<p>（协议签署处）</p>
	    	<p style="font-weight: bold">甲方（本公司）：四川满得利科技有限公司</p>
	    	<p style="font-weight: bold; margin-bottom: 80px;">乙方（用户/您）：</p>
	    </div>
		<div>
			<button class="confirmBtn" id="read">点此进行电子签名</button>
		</div>
	</div>
	
	
<script type="text/javascript">

$(function () {
	
	var moblNo = GetUrlParameter("moblNo");
    var password = GetUrlParameter("password");
    var checkReslt = GetUrlParameter("checkReslt");
    localStorage.setItem("moblNo", moblNo);
    localStorage.setItem("password", password);
    localStorage.setItem("checkReslt", checkReslt);
    localStorage.setItem("isRead", "true");
    //协议中显示phoneNo
    $("#phoneNo").val(localStorage.getItem("moblNo")); 
    
    //按下确认键之后，在iframe中请求合同接口
    $("#read").click( function() {
    	var timestamp = new Date().getTime().toString().substring(5,13);
    	var uuid = genUuid();
        var contractNo = uuid + timestamp;
      	//把合同编号保存以便返回注册页之后使用
        localStorage.setItem("contractNo", contractNo);
        genContract(contractNo);   //生成合同
        getSignUrl(contractNo);    //获取合同签约url地址
    });
    
  	//调用生成合同接口
    var genContract = function(contractNo){
    	var phoneNo = localStorage.getItem("moblNo");
        var sourceType = "26600003";  //来源客户端类型 ：微信
		var sourceUserType = "30400002";  //来源人员类型：客户
		var sourceOsType = "30500023";  //来源系统类型：推荐奖微信公众号
		//var returnUrl = "http://wx.mdlkeji.com/research/wechat/register";       //生产环境回调地址
		var returnUrl = "http://test.boyacx.com/research/wechat/register";      //测试环境回调地址
		
    	var params = {
    			"phoneNo" : phoneNo,
    			"contractNo" : contractNo,
    			"sourceType" : sourceType,
    			"sourceUserType" : sourceUserType,
    			"sourceOsType" : sourceOsType,
    			"returnUrl" : returnUrl
            }
    	var jsonData = JSON.stringify(params);
    	$.ajax({
            url: "/research/wechat/signature/contract/gene",
            type: "POST",
            data: jsonData,
            contentType: "application/json; charset=utf-8",
            async : false, //同步调用
            success:function(data){
				if (data.success) {
					toast("warning", "生成合同成功", 1500, ".register", "16%", "20px");
				}else{
					toast("warning", data.map.msg, 1500, ".register", "16%", "20px");
				}
			},
			error: function(data){
				console.log(data);
				toast("warning", "生成合同失败", 1500, ".register", "16%", "20px");
			}
        }); 
    }
    
    //获取待签约列表
    var getSignUrl = function(contractNo){
    	var phoneNo = localStorage.getItem("moblNo");
    	var params = {
    			"phoneNo" : phoneNo,
    			"contractNo" : contractNo
            }
    	var jsonData = JSON.stringify(params);
    	$.ajax({
            url: "/research/wechat/signature/contract/getsignurl",
            type: "POST",
            data: jsonData,
            contentType: "application/json; charset=utf-8",
            async : false, //同步调用
            success:function(data){
				if (data.success) {
					toast("warning", "获取待签约列表成功", 1500, ".register", "16%", "20px");
					var url = data.map.url;
					//获取成功之后跳转到签约地址
					window.location.href = url;
					
				}else{
					toast("warning", data.map.msg, 1500, ".register", "16%", "20px");
				}
			},
			error: function(data){
				console.log(data);
				toast("warning", "获取待签约列表失败", 1500, ".register", "16%", "20px");
			}
        }); 
    }
  	
    
	//获取url后的参数
    function GetUrlParameter(variable) {
    	var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
    	    var pair = vars[i].split("=");
    	    if(pair[0] == variable){
    	    	return decodeURI(pair[1]);  //decodeURI方法对中文解码
    	    }
        }
        return false;
    }
	
  	//生成UUID
    var genUuid = function() {
    	  function S4() {
    	    return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
    	  }
    	  return (S4()+S4()+S4()+S4()+S4()+S4()+S4()+S4());
    }
});
</script>
</body>
</html>